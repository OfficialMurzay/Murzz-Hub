-- MurzzHub v1.0e Beta (UI + Player Data Functionality Fixed)
-- Author: Murzay

-------------------------------------------------
-- SERVICES
-------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local OtherData = Player:WaitForChild("OtherData") -- Wait for OtherData folder

-------------------------------------------------
-- RAYFIELD
-------------------------------------------------
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "MurzzHub v1.0e Beta",
    LoadingTitle = "MurzzHub v1.0e Beta",
    LoadingSubtitle = "Player Data Live â€¢ UI Only",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MurzzHub",
        FileName = "AFSE_UI"
    },
    KeySystem = false
})

-------------------------------------------------
-- CLASS MAP
-------------------------------------------------
local ClassMap = {
    [1]="Fighter ðŸ¥Š",[2]="Shinobi ðŸŒ€",[3]="Pirate â˜ ï¸",[4]="Ghoul ðŸ‘»",[5]="Hero ðŸ¦¸",
    [6]="Reaper â˜ ï¸",[7]="Saiyan ðŸ’¥",[8]="Sin ðŸ˜ˆ",[9]="Magi ðŸ§™",[10]="Akuma ðŸ˜¡",
    [11]="Yonko ðŸ´â€â˜ ï¸",[12]="Gorosei ðŸ§“",[13]="Overlord ðŸ‘‘",[14]="Hokage ðŸ¦Š",
    [15]="Kaioshin ðŸ‘¼",[16]="Sage ðŸ•Šï¸",[17]="Espada âš”ï¸",[18]="Shinigami ðŸ‘¹",
    [19]="Hashira âš”ï¸",[20]="Hakaishin ðŸ’€",[21]="Otsutsuki ðŸŒŒ",
    [22]="Pirate King ðŸ´â€â˜ ï¸ðŸ‘‘",[23]="Kishin ðŸ‘¿",[24]="Angel ðŸ˜‡",
    [25]="Demon King ðŸ‘¹",[26]="Ultra Instinct âœ¨",[27]="Upper Moon ðŸŒ™"
}

-------------------------------------------------
-- UTILITIES
-------------------------------------------------
local function abbreviateNumber(num)
    if not num then return "0" end
    local absNum = math.abs(num)
    if absNum >= 1e21 then return string.format("%.2fSx", num/1e21)
    elseif absNum >= 1e18 then return string.format("%.2fQn", num/1e18)
    elseif absNum >= 1e15 then return string.format("%.2fQd", num/1e15)
    elseif absNum >= 1e12 then return string.format("%.2fT", num/1e12)
    elseif absNum >= 1e9 then return string.format("%.2fB", num/1e9)
    elseif absNum >= 1e6 then return string.format("%.2fM", num/1e6)
    elseif absNum >= 1e3 then return string.format("%.2fK", num/1e3)
    else return tostring(num) end
end

local function animateValue(label, startVal, endVal, duration)
    local step = (endVal - startVal) / (duration * 30)
    local current = startVal
    local connection
    connection = RunService.RenderStepped:Connect(function()
        current = current + step
        if (step > 0 and current >= endVal) or (step < 0 and current <= endVal) then
            current = endVal
            connection:Disconnect()
        end
        if label and label.Set then
            label:Set(abbreviateNumber(math.floor(current)))
        end
    end)
end

-------------------------------------------------
-- HOME TAB
-------------------------------------------------
local HomeTab = Window:CreateTab("Home ðŸ ")

-- Sections
HomeTab:CreateSection("Player Data ðŸ‘¤")

-- Player Data Labels
local ClassLabel      = HomeTab:CreateLabel("Class: ...")
local PowerLabel      = HomeTab:CreateLabel("Total Power: ... âš¡")
local YenLabel        = HomeTab:CreateLabel("Money: ... ðŸ’°")
local ChikaraLabel    = HomeTab:CreateLabel("Chikara: ... ðŸ’Ž")

HomeTab:CreateSection("Live Stats ðŸ“Š")
local LiveStats = {
    Strength   = HomeTab:CreateLabel("Strength: ... ðŸ’ª"),
    Durability = HomeTab:CreateLabel("Durability: ... ðŸ›¡ï¸"),
    Chakra     = HomeTab:CreateLabel("Chakra: ... ðŸŒ€"),
    Sword      = HomeTab:CreateLabel("Sword: ... ðŸ—¡ï¸"),
    Speed      = HomeTab:CreateLabel("Speed: ... ðŸ’¨"),
    Agility    = HomeTab:CreateLabel("Agility: ... â˜ï¸"),
}

HomeTab:CreateSection("Quest Overview ðŸ“œ")
local QuestOverviewTitle = HomeTab:CreateLabel("Quest: Example 10%")
local QuestOverviewLines = {}
for i = 1, 3 do
    QuestOverviewLines[i] = HomeTab:CreateLabel("Quest: Example "..(i*10).."%")
end

-------------------------------------------------
-- PLAYER DATA LIVE UPDATE
-------------------------------------------------
local currentPower, currentYen, currentChikara = 0, 0, 0

RunService.Heartbeat:Connect(function()
    -- Class
    if OtherData:FindFirstChild("Class") then
        ClassLabel:Set("Class: "..(ClassMap[OtherData.Class.Value] or "Unknown â“"))
    end

    -- Total Power
    if OtherData:FindFirstChild("TotalPower") then
        local target = OtherData.TotalPower.Value
        animateValue(PowerLabel, currentPower, target, 0.5)
        currentPower = target
    end

    -- Yen
    if OtherData:FindFirstChild("Yen") then
        local target = OtherData.Yen.Value
        animateValue(YenLabel, currentYen, target, 0.5)
        currentYen = target
    end

    -- Chikara
    if OtherData:FindFirstChild("Chikara") then
        local target = OtherData.Chikara.Value
        animateValue(ChikaraLabel, currentChikara, target, 0.5)
        currentChikara = target
    end
end)

-------------------------------------------------
-- DONE
-------------------------------------------------
Rayfield:LoadConfiguration()
print("[MurzzHub] UI + Player Data functionality v1.0e Beta loaded successfully")
