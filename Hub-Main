-- MurzzHub v1.0j Beta
-- BASE RESET: Info + Home (Player Data + Live Stats)
-- Author: Murzay

-------------------------------------------------
-- SERVICES
-------------------------------------------------
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

-------------------------------------------------
-- SAFE WAIT FUNCTION
-------------------------------------------------
local function waitFor(parent, name)
    local obj = parent:FindFirstChild(name)
    while not obj do
        parent.ChildAdded:Wait()
        obj = parent:FindFirstChild(name)
    end
    return obj
end

-------------------------------------------------
-- PLAYER DATA
-------------------------------------------------
local OtherData   = waitFor(Player, "OtherData")
local StatsFolder = waitFor(Player, "Stats")

-------------------------------------------------
-- RAYFIELD
-------------------------------------------------
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local VERSION = "v1.0j Beta"

local Window = Rayfield:CreateWindow({
    Name = "MurzzHub "..VERSION,
    LoadingTitle = "MurzzHub "..VERSION,
    LoadingSubtitle = VERSION.." - UI Live Player Data",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MurzzHub",
        FileName = "AFSE_UI"
    },
    KeySystem = false
})

-------------------------------------------------
-- CLASS MAP (UNCHANGED)
-------------------------------------------------
local ClassMap = {
    [1]="Fighter ü•ä",[2]="Shinobi üåÄ",[3]="Pirate ‚ò†Ô∏è",[4]="Ghoul üëª",[5]="Hero ü¶∏",
    [6]="Reaper ‚ò†Ô∏è",[7]="Saiyan üí•",[8]="Sin üòà",[9]="Magi üßô",[10]="Akuma üò°",
    [11]="Yonko üè¥‚Äç‚ò†Ô∏è",[12]="Gorosei üßì",[13]="Overlord üëë",[14]="Hokage ü¶ä",
    [15]="Kaioshin üëº",[16]="Sage üïäÔ∏è",[17]="Espada ‚öîÔ∏è",[18]="Shinigami üëπ",
    [19]="Hashira ‚öîÔ∏è",[20]="Hakaishin üíÄ",[21]="Otsutsuki üåå",
    [22]="Pirate King üè¥‚Äç‚ò†Ô∏èüëë",[23]="Kishin üëø",[24]="Angel üòá",
    [25]="Demon King üëπ",[26]="Ultra Instinct ‚ú®",[27]="Upper Moon üåô"
}

-------------------------------------------------
-- STAT MAP (UNCHANGED)
-------------------------------------------------
local StatIdToName = {
    ["1"]="Strength üí™",
    ["2"]="Durability üõ°Ô∏è",
    ["3"]="Chakra üåÄ",
    ["4"]="Sword üó°Ô∏è",
    ["5"]="Speed üí®",
    ["6"]="Agility ‚òÅÔ∏è"
}

-------------------------------------------------
-- UTIL
-------------------------------------------------
local function abbreviateNumber(num)
    num = tonumber(num) or 0
    if num >= 1e12 then return string.format("%.2fT", num/1e12)
    elseif num >= 1e9 then return string.format("%.2fB", num/1e9)
    elseif num >= 1e6 then return string.format("%.2fM", num/1e6)
    elseif num >= 1e3 then return string.format("%.2fK", num/1e3)
    else return tostring(num) end
end

-------------------------------------------------
-- INFO TAB (RESTORED)
-------------------------------------------------
local InfoTab = Window:CreateTab("Info üõ†Ô∏è")

InfoTab:CreateSection("Update Log üìù")
InfoTab:CreateParagraph({
    Title = "Update Log "..VERSION,
    Content = "Quest Overview percentages fixed.\nAll existing systems preserved."
})

InfoTab:CreateSection("Discord üí¨")
InfoTab:CreateParagraph({
    Title = "Dear @"..Player.DisplayName,
    Content =
        "Thank you for using my script!\n\n"..
        "Every use supports me and motivates future updates.\n"..
        "Join the Discord for sneak peeks, events and more!\n\n"..
        "‚ù§Ô∏è - Murzay (Scripter)"
})

InfoTab:CreateButton({
    Name = "Join The Discord Server!",
    Callback = function()
        setclipboard("DISCORD_LINK_HERE")
    end
})

-------------------------------------------------
-- HOME TAB
-------------------------------------------------
local HomeTab = Window:CreateTab("Home üè†")

-------------------------------------------------
-- PLAYER DATA
-------------------------------------------------
HomeTab:CreateSection("Player Data üë§")

local ClassLabel   = HomeTab:CreateLabel("Class: ...")
local PowerLabel   = HomeTab:CreateLabel("Total Power: ... ‚ö°")
local YenLabel     = HomeTab:CreateLabel("Money: ... üí∞")
local ChikaraLabel = HomeTab:CreateLabel("Chikara: ... üíé")

-------------------------------------------------
-- LIVE STATS
-------------------------------------------------
HomeTab:CreateSection("Live Stats üìä")
local StatLabels = {}

for id,name in pairs(StatIdToName) do
    StatLabels[id] = HomeTab:CreateLabel(name..": ...")
end

-------------------------------------------------
-- BIND PLAYER VALUES (EVENT-BASED)
-------------------------------------------------
local function bindValue(folder, name, label, prefix, suffix)
    local v = waitFor(folder, name)
    local function update()
        label.Text = prefix..abbreviateNumber(v.Value)..(suffix or "")
    end
    update()
    v.Changed:Connect(update)
end

bindValue(OtherData, "TotalPower", PowerLabel, "Total Power: ", " ‚ö°")
bindValue(OtherData, "Yen",        YenLabel,   "Money: ",       " üí∞")
bindValue(OtherData, "Chikara",    ChikaraLabel,"Chikara: ",    " üíé")

-------------------------------------------------
-- CLASS (SPECIAL CASE)
-------------------------------------------------
local ClassValue = waitFor(OtherData, "Class")
local function updateClass()
    ClassLabel.Text = "Class: "..(ClassMap[ClassValue.Value] or "Unknown ‚ùì")
end
updateClass()
ClassValue.Changed:Connect(updateClass)

-------------------------------------------------
-- STAT BINDING
-------------------------------------------------
for id,label in pairs(StatLabels) do
    local stat = waitFor(StatsFolder, id)
    local function update()
        label.Text = StatIdToName[id]..": "..abbreviateNumber(stat.Value)
    end
    update()
    stat.Changed:Connect(update)
end

-------------------------------------------------
-- DONE
-------------------------------------------------
Rayfield:LoadConfiguration()
print("[MurzzHub] Base UI loaded successfully")
