-- MurzzHub v1.0j Beta
-- RESET BASE: Info + Home (AFSE-CORRECT)
-- Author: Murzay

-------------------------------------------------
-- SERVICES
-------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Player = Players.LocalPlayer

-------------------------------------------------
-- WAIT
-------------------------------------------------
local function waitFor(parent, name)
    local obj = parent:FindFirstChild(name)
    while not obj do
        parent.ChildAdded:Wait()
        obj = parent:FindFirstChild(name)
    end
    return obj
end

-------------------------------------------------
-- DATA
-------------------------------------------------
local OtherData   = waitFor(Player, "OtherData")
local StatsFolder = waitFor(Player, "Stats")

-------------------------------------------------
-- RAYFIELD
-------------------------------------------------
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local VERSION = "v1.0j Beta"

local Window = Rayfield:CreateWindow({
    Name = "MurzzHub "..VERSION,
    LoadingTitle = "MurzzHub "..VERSION,
    LoadingSubtitle = VERSION.." - Live Player Data",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MurzzHub",
        FileName = "AFSE_UI"
    },
    KeySystem = false
})

-------------------------------------------------
-- MAPS
-------------------------------------------------
local ClassMap = {
    [1]="Fighter ğŸ¥Š",[2]="Shinobi ğŸŒ€",[3]="Pirate â˜ ï¸",[4]="Ghoul ğŸ‘»",[5]="Hero ğŸ¦¸",
    [6]="Reaper â˜ ï¸",[7]="Saiyan ğŸ’¥",[8]="Sin ğŸ˜ˆ",[9]="Magi ğŸ§™",[10]="Akuma ğŸ˜¡",
    [11]="Yonko ğŸ´â€â˜ ï¸",[12]="Gorosei ğŸ§“",[13]="Overlord ğŸ‘‘",[14]="Hokage ğŸ¦Š",
    [15]="Kaioshin ğŸ‘¼",[16]="Sage ğŸ•Šï¸",[17]="Espada âš”ï¸",[18]="Shinigami ğŸ‘¹",
    [19]="Hashira âš”ï¸",[20]="Hakaishin ğŸ’€",[21]="Otsutsuki ğŸŒŒ",
    [22]="Pirate King ğŸ´â€â˜ ï¸ğŸ‘‘",[23]="Kishin ğŸ‘¿",[24]="Angel ğŸ˜‡",
    [25]="Demon King ğŸ‘¹",[26]="Ultra Instinct âœ¨",[27]="Upper Moon ğŸŒ™"
}

local StatIdToName = {
    ["1"]="Strength ğŸ’ª",
    ["2"]="Durability ğŸ›¡ï¸",
    ["3"]="Chakra ğŸŒ€",
    ["4"]="Sword ğŸ—¡ï¸",
    ["5"]="Speed ğŸ’¨",
    ["6"]="Agility â˜ï¸"
}

-------------------------------------------------
-- UTIL
-------------------------------------------------
local function abbr(n)
    n = tonumber(n) or 0
    if n >= 1e12 then return string.format("%.2fT", n/1e12)
    elseif n >= 1e9 then return string.format("%.2fB", n/1e9)
    elseif n >= 1e6 then return string.format("%.2fM", n/1e6)
    elseif n >= 1e3 then return string.format("%.2fK", n/1e3)
    else return tostring(n) end
end

-------------------------------------------------
-- INFO TAB (UNCHANGED)
-------------------------------------------------
local InfoTab = Window:CreateTab("Info ğŸ› ï¸")

InfoTab:CreateSection("Update Log ğŸ“")
InfoTab:CreateParagraph({
    Title = "Update Log "..VERSION,
    Content = "Quest Overview percentages fixed.\nAll existing systems preserved."
})

InfoTab:CreateSection("Discord ğŸ’¬")
InfoTab:CreateParagraph({
    Title = "Dear @"..Player.DisplayName,
    Content =
        "Thank you for using my script!\n\n"..
        "Every use supports me and motivates future updates.\n"..
        "Join the Discord for sneak peeks, events and more!\n\n"..
        "â¤ï¸ - Murzay (Scripter)"
})

InfoTab:CreateButton({
    Name = "Join The Discord Server!",
    Callback = function()
        setclipboard("DISCORD_LINK_HERE")
    end
})

-------------------------------------------------
-- HOME TAB
-------------------------------------------------
local HomeTab = Window:CreateTab("Home ğŸ ")

HomeTab:CreateSection("Player Data ğŸ‘¤")
local ClassLabel   = HomeTab:CreateLabel("Class: ...")
local PowerLabel   = HomeTab:CreateLabel("Total Power: ... âš¡")
local YenLabel     = HomeTab:CreateLabel("Money: ... ğŸ’°")
local ChikaraLabel = HomeTab:CreateLabel("Chikara: ... ğŸ’")

HomeTab:CreateSection("Live Stats ğŸ“Š")
local StatLabels = {}
for id,name in pairs(StatIdToName) do
    StatLabels[id] = HomeTab:CreateLabel(name..": ...")
end

-------------------------------------------------
-- LIVE READ (AFSE-CORRECT)
-------------------------------------------------
RunService.Heartbeat:Connect(function()
    local class = OtherData:FindFirstChild("Class")
    if class then
        ClassLabel.Text = "Class: "..(ClassMap[class.Value] or "Unknown â“")
    end

    local tp = OtherData:FindFirstChild("TotalPower")
    if tp then PowerLabel.Text = "Total Power: "..abbr(tp.Value).." âš¡" end

    local yen = OtherData:FindFirstChild("Yen")
    if yen then YenLabel.Text = "Money: "..abbr(yen.Value).." ğŸ’°" end

    local chi = OtherData:FindFirstChild("Chikara")
    if chi then ChikaraLabel.Text = "Chikara: "..abbr(chi.Value).." ğŸ’" end

    for id,label in pairs(StatLabels) do
        local stat = StatsFolder:FindFirstChild(id)
        if stat then
            label.Text = StatIdToName[id]..": "..abbr(stat.Value)
        end
    end
end)

-------------------------------------------------
-- DONE
-------------------------------------------------
Rayfield:LoadConfiguration()
print("[MurzzHub] Home values live and synced")
