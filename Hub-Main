-- MurzzHub v1.0 Beta
-- Rayfield UI for Anime Fighting Simulator: Endless
-- Author: Murzz (Ashy Bashy)

--[[
ðŸ“ Features:
- Animated loading
- Live player stats
- Live quests overview with percentage
- Animated stat increment
- Abbreviated numbers (K, M, B, T, Qd, Qn, Sx)
- Modern, lively UI with emojis
- Automatic updates
]]

--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

--// Rayfield Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

--// Utility: Format numbers
local function abbreviateNumber(num)
    local absNum = math.abs(num)
    if absNum >= 1e21 then return string.format("%.2fSx", num / 1e21)
    elseif absNum >= 1e18 then return string.format("%.2fQn", num / 1e18)
    elseif absNum >= 1e15 then return string.format("%.2fQd", num / 1e15)
    elseif absNum >= 1e12 then return string.format("%.2fT", num / 1e12)
    elseif absNum >= 1e9 then return string.format("%.2fB", num / 1e9)
    elseif absNum >= 1e6 then return string.format("%.2fM", num / 1e6)
    elseif absNum >= 1e3 then return string.format("%.2fK", num / 1e3)
    else return tostring(num)
    end
end

--// Animated increment function
local function animateValue(label, startVal, endVal, duration)
    local step = (endVal - startVal) / (duration * 30)
    local current = startVal
    local connection
    connection = game:GetService("RunService").RenderStepped:Connect(function()
        current = current + step
        if (step > 0 and current >= endVal) or (step < 0 and current <= endVal) then
            current = endVal
            connection:Disconnect()
        end
        label:Set(abbreviateNumber(math.floor(current)))
    end)
end

--// Loading Screen
Rayfield:LoadConfiguration({
    Name = "MurzzHub Scripts",
    LoadingTitle = "MurzzHub Scripts",
    LoadingSubtitle = "v1.0 Beta",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "MurzzHub"
    },
})

--// Main Window
local Window = Rayfield:CreateWindow({
    Name = "Murzzhub | AFSE",
    LoadingTitle = "MurzzHub Scripts",
    LoadingSubtitle = "v1.0 Beta",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "MurzzHub"
    }
})

--// Home Tab
local HomeTab = Window:CreateTab("Home ðŸ ", nil)

-- Player Data Section
local PlayerSection = HomeTab:CreateSection("Player Data ðŸ§‘â€ðŸ’»")

-- Stats labels
local ClassLabel = PlayerSection:CreateLabel({ Name = "Class: ..." })
local TotalPowerLabel = PlayerSection:CreateLabel({ Name = "Total Power: ..." })
local YenLabel = PlayerSection:CreateLabel({ Name = "Yen: ..." })
local ChikaraLabel = PlayerSection:CreateLabel({ Name = "Chikara: ..." })

-- Live Stats Section
local StatsSection = HomeTab:CreateSection("Live Stats âš¡")
local StatLabels = {}
local StatNames = {"Strength", "Durability", "Chakra", "Sword", "Speed", "Agility"}
for i, stat in ipairs(StatNames) do
    StatLabels[stat] = StatsSection:CreateLabel({ Name = stat.." : ..." })
end

-- Quests Overview Section
local QuestSection = HomeTab:CreateSection("Quests Overview ðŸ—‚ï¸")
local QuestLabels = {}

--// Update Loop
local function updateUI()
    -- Player Data
    ClassLabel:Set("Class: "..tostring(LocalPlayer:WaitForChild("OtherData"):WaitForChild("Class").Value).." ðŸ·ï¸")
    animateValue(TotalPowerLabel, tonumber(TotalPowerLabel.Name:match("%d+")) or 0, LocalPlayer.OtherData.TotalPower.Value, 0.5)
    animateValue(YenLabel, tonumber(YenLabel.Name:match("%d+")) or 0, LocalPlayer.OtherData.Yen.Value, 0.5)
    animateValue(ChikaraLabel, tonumber(ChikaraLabel.Name:match("%d+")) or 0, LocalPlayer.OtherData.Chikara.Value, 0.5)

    -- Live Stats
    local Stats = LocalPlayer:WaitForChild("Stats")
    for i, statName in ipairs(StatNames) do
        local statValue = Stats[tostring(i)].Value
        animateValue(StatLabels[statName], tonumber(StatLabels[statName].Name:match("%d+")) or 0, statValue, 0.5)
    end

    -- Quests
    local Quests = LocalPlayer:WaitForChild("Quests")
    for _, questFolder in ipairs(Quests:GetChildren()) do
        if not QuestLabels[questFolder.Name] then
            QuestLabels[questFolder.Name] = QuestSection:CreateLabel({ Name = questFolder.Name.." : 0%" })
        end

        local progressSum, requirementSum = 0, 0
        local Progress = questFolder:FindFirstChild("Progress")
        local Requirements = questFolder:FindFirstChild("Requirements")
        if Progress and Requirements then
            for i=1,6 do
                local progVal = Progress:FindFirstChild(tostring(i))
                local reqVal = Requirements:FindFirstChild(tostring(i))
                if progVal and reqVal then
                    progressSum = progressSum + progVal.Value
                    requirementSum = requirementSum + reqVal.Value
                end
            end
        end
        local percent = 0
        if requirementSum > 0 then
            percent = math.floor(progressSum / requirementSum * 100)
        end
        QuestLabels[questFolder.Name]:Set(questFolder.Name.." : "..percent.."%")
    end
end

--// Update every frame
game:GetService("RunService").RenderStepped:Connect(updateUI)

-------------------------------------------------
Rayfield:LoadConfiguration()
