-- MurzzHub v1.0g Beta (UI + Player Data & Live Stats Animated)
-- Author: Murzay

-------------------------------------------------
-- SERVICES
-------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local OtherData = Player:WaitForChild("OtherData") -- Wait for OtherData folder
local StatsFolder = Player:WaitForChild("Stats")    -- Wait for Stats folder

-------------------------------------------------
-- RAYFIELD
-------------------------------------------------
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "MurzzHub v1.0g Beta",
    LoadingTitle = "MurzzHub v1.0g Beta",
    LoadingSubtitle = "Player Data & Stats Live",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MurzzHub",
        FileName = "AFSE_UI"
    },
    KeySystem = false
})

-------------------------------------------------
-- CLASS MAP
-------------------------------------------------
local ClassMap = {
    [1]="Fighter ðŸ¥Š",[2]="Shinobi ðŸŒ€",[3]="Pirate â˜ ï¸",[4]="Ghoul ðŸ‘»",[5]="Hero ðŸ¦¸",
    [6]="Reaper â˜ ï¸",[7]="Saiyan ðŸ’¥",[8]="Sin ðŸ˜ˆ",[9]="Magi ðŸ§™",[10]="Akuma ðŸ˜¡",
    [11]="Yonko ðŸ´â€â˜ ï¸",[12]="Gorosei ðŸ§“",[13]="Overlord ðŸ‘‘",[14]="Hokage ðŸ¦Š",
    [15]="Kaioshin ðŸ‘¼",[16]="Sage ðŸ•Šï¸",[17]="Espada âš”ï¸",[18]="Shinigami ðŸ‘¹",
    [19]="Hashira âš”ï¸",[20]="Hakaishin ðŸ’€",[21]="Otsutsuki ðŸŒŒ",
    [22]="Pirate King ðŸ´â€â˜ ï¸ðŸ‘‘",[23]="Kishin ðŸ‘¿",[24]="Angel ðŸ˜‡",
    [25]="Demon King ðŸ‘¹",[26]="Ultra Instinct âœ¨",[27]="Upper Moon ðŸŒ™"
}

-------------------------------------------------
-- STAT MAP
-------------------------------------------------
local StatIdToName = {
    [1]="Strength ðŸ’ª",
    [2]="Durability ðŸ›¡ï¸",
    [3]="Chakra ðŸŒ€",
    [4]="Sword ðŸ—¡ï¸",
    [5]="Speed ðŸ’¨",
    [6]="Agility â˜ï¸"
}

-------------------------------------------------
-- UTILITIES
-------------------------------------------------
local function abbreviateNumber(num)
    if not num then return "0" end
    local absNum = math.abs(num)
    if absNum >= 1e21 then return string.format("%.2fSx", num/1e21)
    elseif absNum >= 1e18 then return string.format("%.2fQn", num/1e18)
    elseif absNum >= 1e15 then return string.format("%.2fQd", num/1e15)
    elseif absNum >= 1e12 then return string.format("%.2fT", num/1e12)
    elseif absNum >= 1e9 then return string.format("%.2fB", num/1e9)
    elseif absNum >= 1e6 then return string.format("%.2fM", num/1e6)
    elseif absNum >= 1e3 then return string.format("%.2fK", num/1e3)
    else return tostring(num) end
end

local function animateValue(label, startVal, endVal, prefix, duration)
    if startVal == endVal then return end
    local step = (endVal - startVal) / (duration * 30)
    local current = startVal
    local connection
    connection = RunService.RenderStepped:Connect(function()
        current = current + step
        if (step > 0 and current >= endVal) or (step < 0 and current <= endVal) then
            current = endVal
            connection:Disconnect()
        end
        if label and label.Set then
            label:Set(prefix..abbreviateNumber(math.floor(current)))
        end
    end)
end

-------------------------------------------------
-- HOME TAB
-------------------------------------------------
local HomeTab = Window:CreateTab("Home ðŸ ")

-- Sections
HomeTab:CreateSection("Player Data ðŸ‘¤")

-- Player Data Labels
local ClassLabel   = HomeTab:CreateLabel("Class: ...")
local PowerLabel   = HomeTab:CreateLabel("Total Power: ... âš¡")
local YenLabel     = HomeTab:CreateLabel("Money: ... ðŸ’°")
local ChikaraLabel = HomeTab:CreateLabel("Chikara: ... ðŸ’Ž")

-- Live Stats Section
HomeTab:CreateSection("Live Stats ðŸ“Š")
local LiveStats = {}
for statId, name in pairs(StatIdToName) do
    LiveStats[statId] = {
        Label = HomeTab:CreateLabel(name..": ..."),
        Value = 0
    }
end

-- Quest Overview placeholders
HomeTab:CreateSection("Quest Overview ðŸ“œ")
local QuestOverviewTitle = HomeTab:CreateLabel("Quest: Example 10%")
local QuestOverviewLines = {}
for i = 1, 3 do
    QuestOverviewLines[i] = HomeTab:CreateLabel("Quest: Example "..(i*10).."%")
end

-------------------------------------------------
-- PLAYER DATA LIVE UPDATE
-------------------------------------------------
local currentPower, currentYen, currentChikara = 0, 0, 0

RunService.Heartbeat:Connect(function()
    -- Class
    if OtherData:FindFirstChild("Class") then
        ClassLabel:Set("Class: "..(ClassMap[OtherData.Class.Value] or "Unknown â“"))
    end

    -- Total Power
    if OtherData:FindFirstChild("TotalPower") then
        local target = OtherData.TotalPower.Value
        animateValue(PowerLabel, currentPower, target, "Total Power: âš¡ ", 0.5)
        currentPower = target
    end

    -- Yen
    if OtherData:FindFirstChild("Yen") then
        local target = OtherData.Yen.Value
        animateValue(YenLabel, currentYen, target, "Money: ðŸ’° ", 0.5)
        currentYen = target
    end

    -- Chikara
    if OtherData:FindFirstChild("Chikara") then
        local target = OtherData.Chikara.Value
        animateValue(ChikaraLabel, currentChikara, target, "Chikara: ðŸ’Ž ", 0.5)
        currentChikara = target
    end

    -- Live Stats
    for statId, data in pairs(LiveStats) do
        local statObj = StatsFolder:FindFirstChild(tostring(statId))
        if statObj and statObj.Value ~= data.Value then
            animateValue(data.Label, data.Value, statObj.Value, StatIdToName[statId]..": ", 0.5)
            data.Value = statObj.Value
        end
    end
end)

-------------------------------------------------
-- DONE
-------------------------------------------------
Rayfield:LoadConfiguration()
print("[MurzzHub] UI + Player Data & Live Stats functionality v1.0g Beta loaded successfully")
