-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Load Rayfield
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Window
local Window = Rayfield:CreateWindow({
    Name = "Murzz Hub | AFSE",
    LoadingTitle = "Murzz Hub | AFSE",
    LoadingSubtitle = "AFSE",
    ConfigurationSaving = { Enabled = false },
    KeySystem = false
})

-- ========================
-- Home Tab
-- ========================
local HomeTab = Window:CreateTab("Home")
HomeTab:CreateSection("Info")

-- Classes mapping with emojis
local ClassMap = {
    [1] = "Fighter ğŸ¥Š",
    [2] = "Shinobi ğŸ¥·",
    [3] = "Pirate â˜ ï¸",
    [4] = "Ghoul ğŸ‘¹",
    [5] = "Hero ğŸ¦¸",
    [6] = "Reaper â˜ ï¸",
    [7] = "Saiyan ğŸ’¥",
    [8] = "Sin ğŸ˜ˆ",
    [9] = "Magi ğŸ§™",
    [10] = "Akuma ğŸ‘¿",
    [11] = "Yonko ğŸ‘‘",
    [12] = "Gorosei ğŸ‘´",
    [13] = "Overlord ğŸ°",
    [14] = "Hokage ğŸ”¥",
    [15] = "Kaioshin âœ¨",
    [16] = "Sage ğŸƒ",
    [17] = "Espada âš”ï¸",
    [18] = "Shinigami âš°ï¸",
    [19] = "Hashira ğŸ—¡ï¸",
    [20] = "Hakaishin ğŸ’£",
    [21] = "Otsutsuki ğŸŒ™",
    [22] = "Pirate King ğŸ‘‘ğŸ´â€â˜ ï¸",
    [23] = "Kishin ğŸ‘º",
    [24] = "Angel ğŸ˜‡",
    [25] = "Demon King ğŸ‘¹ğŸ‘‘",
    [26] = "Ultra Instinct ğŸŒ€âœ¨",
    [27] = "Upper Moon ğŸŒ™ğŸ”"
}

-- Number Formatter
local function formatNumber(num)
    if not num then return "Loading..." end
    num = tonumber(num)
    if not num then return "Loading..." end

    local formats = {
        {1e18, "Qn"},
        {1e15, "Qd"},
        {1e12, "T"},
        {1e9,  "B"},
        {1e6,  "M"},
        {1e3,  "K"},
    }

    for _, f in ipairs(formats) do
        if num >= f[1] then
            return string.format("%.2f%s", num / f[1], f[2]):gsub("%.00", "")
        end
    end

    return tostring(num)
end

-- Info labels
local ClassLabel = HomeTab:CreateLabel("Class: Loading ğŸ†")
local TotalPowerLabel = HomeTab:CreateLabel("Total Power: Loading âš¡")

-- Live Stats section
HomeTab:CreateSection("Live Stats")

-- Live stats labels with emojis on the right
local liveStats = {
    Strength = HomeTab:CreateLabel("Strength: Loading ğŸ’ª"),
    Durability = HomeTab:CreateLabel("Durability: Loading ğŸ›¡ï¸"),
    Chakra = HomeTab:CreateLabel("Chakra: Loading ğŸŒ€"),
    Sword = HomeTab:CreateLabel("Sword: Loading âš”ï¸"),
    Agility = HomeTab:CreateLabel("Agility: Loading ğŸ•Šï¸"),
    Speed = HomeTab:CreateLabel("Speed: Loading ğŸ’¨")
}

-- Stat ID mapping
local StatMap = {
    Strength = "1",
    Durability = "2",
    Chakra = "3",
    Sword = "4",
    Agility = "5",
    Speed = "6"
}

-- Update loop for live stats, total power, and class
task.spawn(function()
    while true do
        -- Live stats
        local statsFolder = player:FindFirstChild("Stats")
        if statsFolder then
            for statName, statID in pairs(StatMap) do
                local stat = statsFolder:FindFirstChild(statID)
                if stat and stat.Value ~= nil then
                    liveStats[statName]:Set(statName..": "..formatNumber(stat.Value).." "..(liveStats[statName].Name:match("%S+$") or ""))
                else
                    liveStats[statName]:Set(statName..": Loading")
                end
            end
        end

        -- Total Power
        local otherData = player:FindFirstChild("OtherData")
        if otherData and otherData:FindFirstChild("TotalPower") then
            TotalPowerLabel:Set("Total Power: "..formatNumber(otherData.TotalPower.Value).." âš¡")
        else
            TotalPowerLabel:Set("Total Power: Loading âš¡")
        end

        -- Class
        if otherData and otherData:FindFirstChild("Class") then
            local classID = otherData.Class.Value
            local className = ClassMap[classID] or "Unknown â“"
            ClassLabel:Set("Class: "..className)
        else
            ClassLabel:Set("Class: Loading ğŸ†")
        end

        task.wait(0.5)
    end
end)
